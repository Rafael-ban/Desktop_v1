# 贡献指南

感谢您对 DiskNext Desktop (HFR-Cloud Desktop) 的关注！我们欢迎并感谢任何形式的贡献。

---

## 📋 目录

- [行为准则](#行为准则)
- [如何贡献](#如何贡献)
- [报告 Bug](#报告-bug)
- [提出新功能](#提出新功能)
- [提交代码](#提交代码)
- [代码规范](#代码规范)
- [提交信息规范](#提交信息规范)

---

## 行为准则

参与本项目即表示您同意遵守我们的行为准则：
- 尊重所有贡献者
- 使用友好和包容的语言
- 接受建设性的批评
- 关注对社区最有利的事情

---

## 如何贡献

您可以通过以下方式为项目做出贡献：

1. 🐛 **报告 Bug** - 帮助我们发现和修复问题
2. 💡 **提出新功能** - 分享您的想法
3. 📝 **改进文档** - 帮助其他用户更好地使用项目
4. 💻 **提交代码** - 修复 Bug 或实现新功能
5. ⭐ **Star 项目** - 让更多人知道这个项目

---

## 报告 Bug

在报告 Bug 之前，请先检查 [Issues](https://github.com/DiskNext/Desktop_v1/issues) 中是否已存在相同的问题。

### Bug 报告应包含：

- **清晰的标题**：简洁描述问题
- **详细描述**：
  - 您期望发生什么
  - 实际发生了什么
  - 重现步骤
- **环境信息**：
  - 操作系统及版本
  - Python 版本
  - 程序版本
  - 服务端类型及版本（HFR-Cloud / Cloudreve）
- **错误日志**：如果有的话
- **截图**：如果适用

### 示例 Bug 报告模板：

```markdown
### 问题描述
简洁清晰地描述 bug

### 重现步骤
1. 打开 '...'
2. 点击 '...'
3. 滚动到 '...'
4. 看到错误

### 期望行为
清晰描述您期望发生什么

### 实际行为
清晰描述实际发生了什么

### 环境信息
- 操作系统: [例如 Windows 11]
- Python 版本: [例如 3.10.5]
- 程序版本: [例如 0.2.4]
- 服务端: [例如 Cloudreve 3.8.4 Pro]

### 附加信息
添加任何其他关于问题的上下文或截图
```

---

## 提出新功能

我们欢迎新功能建议！在提出之前：

1. 检查 [Issues](https://github.com/DiskNext/Desktop_v1/issues) 中是否已有类似建议
2. 确保功能与项目目标一致

### 功能请求应包含：

- **功能描述**：清晰描述您想要的功能
- **使用场景**：为什么需要这个功能
- **可能的实现方案**：如果您有想法的话
- **替代方案**：是否考虑过其他解决方案

---

## 提交代码

### 开发流程

1. **Fork 仓库**
   ```bash
   # 在 GitHub 上 Fork 项目
   ```

2. **克隆您的 Fork**
   ```bash
   git clone https://github.com/YOUR_USERNAME/Desktop_v1.git
   cd Desktop_v1
   ```

3. **创建特性分支**
   ```bash
   git checkout -b feature/your-feature-name
   ```

4. **设置开发环境**
   ```bash
   pip install -r requirements.txt
   ```

5. **进行更改**
   - 编写代码
   - 添加必要的注释
   - 确保代码符合规范

6. **测试您的更改**
   ```bash
   python GUI_Launcher.py
   ```

7. **提交更改**
   ```bash
   git add .
   git commit -m "feat: 添加新功能"
   ```

8. **推送到您的 Fork**
   ```bash
   git push origin feature/your-feature-name
   ```

9. **创建 Pull Request**
   - 访问您的 Fork 页面
   - 点击 "New Pull Request"
   - 填写 PR 描述

---

## 代码规范

### Python 代码规范

遵循 [PEP 8](https://peps.python.org/pep-0008/) 编码规范：

- 使用 4 个空格缩进（不使用 Tab）
- 每行最多 79 个字符（文档字符串/注释最多 72 个字符）
- 使用空行分隔函数和类
- 导入语句应该分组，按以下顺序：
  1. 标准库导入
  2. 相关第三方导入
  3. 本地应用/库特定导入

### 命名规范

- **变量和函数**：使用小写字母，单词之间用下划线分隔（`snake_case`）
  ```python
  user_name = "admin"
  def get_file_list():
      pass
  ```

- **类**：使用大驼峰命名法（`PascalCase`）
  ```python
  class FileManager:
      pass
  ```

- **常量**：使用全大写字母，单词之间用下划线分隔
  ```python
  MAX_FILE_SIZE = 1024
  ```

### 注释规范

- 使用中文注释（与项目保持一致）
- 为复杂的逻辑添加注释
- 使用文档字符串说明函数用途

```python
def upload_file(file_path, destination):
    """
    上传文件到服务器
    
    参数:
        file_path: 本地文件路径
        destination: 目标路径
        
    返回:
        bool: 上传是否成功
    """
    # 实现代码
    pass
```

---

## 提交信息规范

使用有意义的提交信息，遵循以下格式：

```
<类型>: <简短描述>

[可选的详细描述]

[可选的脚注]
```

### 类型

- `feat`: 新功能
- `fix`: Bug 修复
- `docs`: 文档更新
- `style`: 代码格式调整（不影响功能）
- `refactor`: 代码重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建/工具链相关

### 示例

```bash
feat: 添加文件批量下载功能

实现了批量选择文件并一次性下载的功能，
提升了用户体验。

Closes #123
```

---

## Pull Request 指南

### PR 标题

使用清晰的标题，遵循提交信息规范：
```
feat: 添加文件批量删除功能
fix: 修复登录验证码显示问题
docs: 更新安装说明
```

### PR 描述

应该包含：
1. **更改说明**：描述您做了什么
2. **相关 Issue**：如果有的话，使用 `Closes #123` 或 `Fixes #123`
3. **测试说明**：如何测试这些更改
4. **截图**：如果有 UI 更改

### PR 模板示例

```markdown
## 更改说明
- 添加了文件批量删除功能
- 优化了删除确认对话框

## 相关 Issue
Closes #123

## 测试说明
1. 选择多个文件
2. 右键点击"删除"
3. 确认删除对话框
4. 验证文件已删除

## 截图
[如果有 UI 更改，请附上截图]

## 检查清单
- [ ] 代码遵循项目规范
- [ ] 已添加必要的注释
- [ ] 已测试更改
- [ ] 文档已更新（如需要）
```

---

## 开发提示

### 本地测试

确保在提交前进行充分测试：

```bash
# 运行程序
python GUI_Launcher.py

# 测试不同的配置
# 1. 测试 HFR-Cloud 连接
# 2. 测试 Cloudreve 连接
# 3. 测试不同的主题
# 4. 测试文件上传/下载
```

### 调试技巧

- 使用 `print()` 语句或 Python 调试器
- 检查控制台输出的错误信息
- 查看网络请求和响应

---

## 寻求帮助

如果您在贡献过程中遇到问题：

1. 查看 [README.md](README.md) 和现有文档
2. 搜索 [Issues](https://github.com/DiskNext/Desktop_v1/issues)
3. 创建新的 Issue 寻求帮助

---

## 许可证

通过向本项目提交代码，您同意您的贡献将在 [GPL v3](LICENSE) 许可证下发布。

---

<div align="center">

**感谢您的贡献！** ❤️

每一个贡献，无论大小，都让这个项目变得更好。

</div>
